<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxBet - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å—Ç–∞–≤–æ–∫</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Add inline script to handle early interactions -->
    <script>
        // Early function definitions to prevent timing issues
        window.showRegister = function() {
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.classList.toggle('hidden');
            }
        };
        
        window.showLogin = function() {
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.classList.add('hidden');
            }
        };
        
        // Temporary placeholder functions until app.js loads
        window.login = function() {
            alert('–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–æ–∂–¥–∏—Ç–µ...');
        };
        
        window.register = function() {
            alert('–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–æ–∂–¥–∏—Ç–µ...');
        };
        
        window.logout = function() {
            location.reload();
        };
    </script>
</head>
<body>
    <!-- Loading indicator -->
    <div id="loadingIndicator" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); color: white; display: flex; align-items: center; justify-content: center; z-index: 9999; font-size: 18px;">
        <div style="text-align: center;">
            <div style="margin-bottom: 20px;">üéØ MaxBet</div>
            <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="authForm" class="auth-form">
        <h2 class="auth-title">–í—Ö–æ–¥ –≤ MaxBet</h2>
        <div class="form-group">
            <label for="username">–õ–æ–≥–∏–Ω:</label>
            <input type="text" id="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω">
        </div>
        <div class="form-group">
            <label for="password">–ü–∞—Ä–æ–ª—å:</label>
            <input type="password" id="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
        </div>
        <button class="btn" onclick="login()" style="width: 100%;">–í–æ–π—Ç–∏</button>
        <p class="auth-link">
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="javascript:void(0)" onclick="showRegister()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        </p>
        
        <div id="registerForm" class="hidden register-section">
            <div class="form-group">
                <label for="newUsername">–ù–æ–≤—ã–π –ª–æ–≥–∏–Ω:</label>
                <input type="text" id="newUsername" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω">
            </div>
            <div class="form-group">
                <label for="newPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label>
                <input type="password" id="newPassword" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            <button class="btn" onclick="register()" style="width: 100%;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            <p class="auth-link">
                <a href="javascript:void(0)" onclick="showLogin()">–ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</a>
            </p>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app" class="hidden">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <div class="logo">üéØ MaxBet</div>
            <div class="user-panel">
                <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="userBalance">1000</span> –º–æ–Ω–µ—Ç</div>
                <span id="userRole">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                <button class="btn" onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
        <div class="main-container">
            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
            <div class="sidebar">
                <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                <div class="category active" onclick="selectCategory('politics')" data-category="politics">
                    üèõÔ∏è –ü–æ–ª–∏—Ç–∏–∫–∞
                </div>
                <div class="category" onclick="selectCategory('entertainment')" data-category="entertainment">
                    üé≠ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
                </div>
                <div class="category" onclick="selectCategory('technology')" data-category="technology">
                    üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
                </div>
                <div class="category" onclick="selectCategory('economics')" data-category="economics">
                    üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞
                </div>
                <div class="category" onclick="selectCategory('weather')" data-category="weather">
                    üå§Ô∏è –ü–æ–≥–æ–¥–∞
                </div>
                <div class="category" onclick="selectCategory('society')" data-category="society">
                    üë• –û–±—â–µ—Å—Ç–≤–æ
                </div>
            </div>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —Å —Å–æ–±—ã—Ç–∏—è–º–∏ -->
            <div class="events-container" id="eventsContainer">
                <!-- –°–æ–±—ã—Ç–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <!-- –ö—É–ø–æ–Ω —Å—Ç–∞–≤–æ–∫ -->
            <div class="bet-slip">
                <h3>–ö—É–ø–æ–Ω —Å—Ç–∞–≤–æ–∫</h3>
                <div id="betSlipContent">
                    <div class="empty-betslip">
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è —Å—Ç–∞–≤–∫–∏</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
        <div id="adminPanel" class="admin-panel hidden">
            <h3 class="admin-title">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
            
            <div class="admin-grid">
                <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è -->
                <div class="admin-section">
                    <h4>–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h4>
                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="eventCategory" class="custom-select">
                            <option value="politics">–ü–æ–ª–∏—Ç–∏–∫–∞</option>
                            <option value="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                            <option value="technology">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                            <option value="economics">–≠–∫–æ–Ω–æ–º–∏–∫–∞</option>
                            <option value="weather">–ü–æ–≥–æ–¥–∞</option>
                            <option value="society">–û–±—â–µ—Å—Ç–≤–æ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è:</label>
                        <input type="text" id="eventTitle" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í—ã–±–æ—Ä—ã –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ 2025">
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="eventDescription" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" class="custom-textarea"></textarea>
                    </div>
                    <div class="form-group">
                        <label>–í–∞—Ä–∏–∞–Ω—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                        <input type="text" id="eventOptions" placeholder="–î–∞, –ù–µ—Ç, –í–æ–∑–º–æ–∂–Ω–æ">
                    </div>
                    <div class="form-group">
                        <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                        <input type="text" id="eventCoefficients" placeholder="1.5, 2.0, 3.2">
                    </div>
                    <button class="btn" onclick="addEvent()">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏ -->
                <div class="admin-section">
                    <h4>–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h4>
                    <div class="admin-controls">
                        <button class="btn btn-secondary" onclick="loadUnfinishedEvents()">–ü–æ–∫–∞–∑–∞—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</button>
                        <button class="btn btn-warning" onclick="fixEventsCategories()">–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</button>
                    </div>
                    <div id="adminEventsList" class="admin-events-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç–∞–≤–∫–∏ -->
    <div id="betModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBetModal()">&times;</span>
            <h2 class="modal-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏</h2>
            <div id="betModalContent"></div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="firebase-config.js"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get, push, update, onValue, remove } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        const app = initializeApp(window.firebaseConfig);
        const database = getDatabase(app);
        
        // –î–µ–ª–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ
        window.database = database;
        window.dbRef = ref;
        window.dbSet = set;
        window.dbGet = get;
        window.dbPush = push;
        window.dbUpdate = update;
        window.dbOnValue = onValue;
        window.dbRemove = remove;
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Firebase
        const script = document.createElement('script');
        script.src = 'app.js';
        script.onload = function() {
            // Hide loading indicator when everything is loaded
            const loadingIndicator = document.getElementById('loadingIndicator');
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }
        };
        script.onerror = function() {
            console.error('Failed to load app.js');
            alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
        };
        document.head.appendChild(script);
    </script>
</body>
</html>
