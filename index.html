<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxBet - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å—Ç–∞–≤–æ–∫</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            overflow-x: hidden;
        }
        
        .header {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #4fc3f7;
        }
        
        .user-panel {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .balance {
            background: linear-gradient(45deg, #4fc3f7, #29b6f6);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .main-container {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            height: calc(100vh - 70px);
        }
        
        .sidebar {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar h3 {
            margin-bottom: 15px;
            color: #4fc3f7;
            font-size: 18px;
        }
        
        .category {
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        
        .category:hover {
            background: rgba(79, 195, 247, 0.1);
            border-color: rgba(79, 195, 247, 0.3);
        }
        
        .category.active {
            background: rgba(79, 195, 247, 0.2);
            border-color: #4fc3f7;
        }
        
        .events-container {
            padding: 20px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .event-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .event-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border-color: rgba(79, 195, 247, 0.5);
        }
        
        .event-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
        }
        
        .event-description {
            color: #b0bec5;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .event-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }
        
        .option-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .option-button:hover {
            background: rgba(79, 195, 247, 0.2);
            border-color: #4fc3f7;
            transform: scale(1.02);
        }
        
        .option-button.selected {
            background: rgba(79, 195, 247, 0.3);
            border-color: #4fc3f7;
            box-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }
        
        .option-text {
            font-size: 12px;
            margin-bottom: 5px;
            opacity: 0.8;
        }
        
        .option-coefficient {
            font-size: 16px;
            font-weight: bold;
            color: #4fc3f7;
        }
        
        .bet-slip {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
        }
        
        .bet-slip h3 {
            margin-bottom: 20px;
            color: #4fc3f7;
            font-size: 18px;
        }
        
        .bet-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .bet-event-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .bet-option {
            font-size: 12px;
            color: #b0bec5;
            margin-bottom: 5px;
        }
        
        .bet-coefficient {
            font-size: 16px;
            font-weight: bold;
            color: #4fc3f7;
        }
        
        .remove-bet {
            float: right;
            background: none;
            border: none;
            color: #f44336;
            cursor: pointer;
            font-size: 18px;
        }
        
        .bet-summary {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .bet-type-selector {
            margin-bottom: 15px;
        }
        
        .bet-type-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            margin-right: 10px;
            transition: all 0.3s;
            font-size: 12px;
        }
        
        .bet-type-button.active {
            background: #4fc3f7;
            border-color: #4fc3f7;
        }
        
        .stake-input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            margin-bottom: 10px;
        }
        
        .stake-input::placeholder {
            color: #b0bec5;
        }
        
        .potential-payout {
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .place-bet-button {
            width: 100%;
            background: linear-gradient(45deg, #4fc3f7, #29b6f6);
            border: none;
            color: #fff;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .place-bet-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 195, 247, 0.4);
        }
        
        .place-bet-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .clear-all {
            width: 100%;
            background: transparent;
            border: 1px solid #f44336;
            color: #f44336;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        .clear-all:hover {
            background: rgba(244, 67, 54, 0.1);
        }
        
        .empty-betslip {
            text-align: center;
            color: #b0bec5;
            padding: 40px 20px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 15px;
            padding: 30px;
            min-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .close {
            float: right;
            font-size: 28px;
            cursor: pointer;
            color: #b0bec5;
        }
        
        .close:hover {
            color: #fff;
        }
        
        .auth-form {
            max-width: 300px;
            margin: 50px auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #fff;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
        
        .btn {
            background: linear-gradient(45deg, #4fc3f7, #29b6f6);
            border: none;
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 195, 247, 0.4);
        }
        
        .admin-panel {
            background: rgba(255, 255, 255, 0.05);
            margin: 20px;
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 200px 1fr 280px;
            }
        }
        
        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
            }
            
            .sidebar, .bet-slip {
                position: fixed;
                top: 70px;
                right: -100%;
                width: 300px;
                height: calc(100vh - 70px);
                transition: right 0.3s;
                z-index: 100;
            }
            
            .sidebar.open, .bet-slip.open {
                right: 0;
            }
        }
    </style>
</head>
<body>
    <!-- –§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="authForm" class="auth-form">
        <h2 style="text-align: center; margin-bottom: 30px; color: #4fc3f7;">–í—Ö–æ–¥ –≤ MaxBet</h2>
        <div class="form-group">
            <label for="username">–õ–æ–≥–∏–Ω:</label>
            <input type="text" id="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω">
        </div>
        <div class="form-group">
            <label for="password">–ü–∞—Ä–æ–ª—å:</label>
            <input type="password" id="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
        </div>
        <button class="btn" onclick="login()" style="width: 100%;">–í–æ–π—Ç–∏</button>
        <p style="text-align: center; margin-top: 15px; color: #b0bec5;">
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="showRegister()" style="color: #4fc3f7;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        </p>
        
        <div id="registerForm" class="hidden" style="margin-top: 20px;">
            <div class="form-group">
                <label for="newUsername">–ù–æ–≤—ã–π –ª–æ–≥–∏–Ω:</label>
                <input type="text" id="newUsername" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω">
            </div>
            <div class="form-group">
                <label for="newPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label>
                <input type="password" id="newPassword" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            <button class="btn" onclick="register()" style="width: 100%;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app" class="hidden">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <div class="logo">üéØ MaxBet</div>
            <div class="user-panel">
                <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="userBalance">1000</span> –º–æ–Ω–µ—Ç</div>
                <span id="userRole">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                <button class="btn" onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
        <div class="main-container">
            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
            <div class="sidebar">
                <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                <div class="category active" onclick="selectCategory('politics')" data-category="politics">
                    üèõÔ∏è –ü–æ–ª–∏—Ç–∏–∫–∞
                </div>
                <div class="category" onclick="selectCategory('entertainment')" data-category="entertainment">
                    üé≠ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
                </div>
                <div class="category" onclick="selectCategory('technology')" data-category="technology">
                    üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
                </div>
                <div class="category" onclick="selectCategory('economics')" data-category="economics">
                    üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞
                </div>
                <div class="category" onclick="selectCategory('weather')" data-category="weather">
                    üå§Ô∏è –ü–æ–≥–æ–¥–∞
                </div>
                <div class="category" onclick="selectCategory('society')" data-category="society">
                    üë• –û–±—â–µ—Å—Ç–≤–æ
                </div>
            </div>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —Å —Å–æ–±—ã—Ç–∏—è–º–∏ -->
            <div class="events-container" id="eventsContainer">
                <!-- –°–æ–±—ã—Ç–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <!-- –ö—É–ø–æ–Ω —Å—Ç–∞–≤–æ–∫ -->
            <div class="bet-slip">
                <h3>–ö—É–ø–æ–Ω —Å—Ç–∞–≤–æ–∫</h3>
                <div id="betSlipContent">
                    <div class="empty-betslip">
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è —Å—Ç–∞–≤–∫–∏</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
        <div id="adminPanel" class="admin-panel hidden">
            <h3 style="color: #4fc3f7; margin-bottom: 20px;">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è -->
                <div>
                    <h4 style="margin-bottom: 15px;">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h4>
                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="eventCategory" style="width: 100%; padding: 12px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; background: rgba(255, 255, 255, 0.1); color: #fff;">
                            <option value="politics">–ü–æ–ª–∏—Ç–∏–∫–∞</option>
                            <option value="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                            <option value="technology">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                            <option value="economics">–≠–∫–æ–Ω–æ–º–∏–∫–∞</option>
                            <option value="weather">–ü–æ–≥–æ–¥–∞</option>
                            <option value="society">–û–±—â–µ—Å—Ç–≤–æ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è:</label>
                        <input type="text" id="eventTitle" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í—ã–±–æ—Ä—ã –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ 2025">
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="eventDescription" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" style="width: 100%; height: 80px; padding: 12px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; background: rgba(255, 255, 255, 0.1); color: #fff; resize: vertical;"></textarea>
                    </div>
                    <div class="form-group">
                        <label>–í–∞—Ä–∏–∞–Ω—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                        <input type="text" id="eventOptions" placeholder="–î–∞, –ù–µ—Ç, –í–æ–∑–º–æ–∂–Ω–æ">
                    </div>
                    <div class="form-group">
                        <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                        <input type="text" id="eventCoefficients" placeholder="1.5, 2.0, 3.2">
                    </div>
                    <button class="btn" onclick="addEvent()">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏ -->
                <div>
                    <h4 style="margin-bottom: 15px;">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h4>
                    <div id="adminEventsList" style="max-height: 400px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç–∞–≤–∫–∏ -->
    <div id="betModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBetModal()">&times;</span>
            <h2 style="margin-bottom: 20px; color: #4fc3f7;">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏</h2>
            <div id="betModalContent"></div>
        </div>
    </div>

    <!-- Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
    <script src="firebase-config.js"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get, push, update, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        const app = initializeApp(window.firebaseConfig);
        const database = getDatabase(app);

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        window.db = database;
        window.dbRef = ref;
        window.dbSet = set;
        window.dbGet = get;
        window.dbPush = push;
        window.dbUpdate = update;
        
        let currentUser = null;
        let events = {};
        let settings = { maxBetAmount: 1000, defaultBalance: 5000 };
        let selectedBets = []; // –ö–æ—Ä–∑–∏–Ω–∞ —Å—Ç–∞–≤–æ–∫
        let currentCategory = 'politics';

        // === –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ===
        window.login = async function() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                alert('–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å');
                return;
            }

            try {
                const userRef = ref(database, `users/${username}`);
                const snapshot = await get(userRef);
                
                if (snapshot.exists()) {
                    const userData = snapshot.val();
                    if (userData.password === password) {
                        currentUser = { username, ...userData };
                        showApp();
                    } else {
                        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å');
                    }
                } else {
                    alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
                alert('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
            }
        };

        window.register = async function() {
            const username = document.getElementById('newUsername').value;
            const password = document.getElementById('newPassword').value;
            
            if (!username || !password) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }

            try {
                const userRef = ref(database, `users/${username}`);
                const snapshot = await get(userRef);
                
                if (snapshot.exists()) {
                    alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
                    return;
                }

                const newUser = {
                    password: password,
                    balance: settings.defaultBalance,
                    role: 'user'
                };

                await set(userRef, newUser);
                alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!');
                
                document.getElementById('username').value = username;
                document.getElementById('password').value = password;
                showLogin();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞');
            }
        };

        window.logout = function() {
            currentUser = null;
            selectedBets = [];
            localStorage.removeItem('currentUser');
            document.getElementById('authForm').classList.remove('hidden');
            document.getElementById('app').classList.add('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
        };

        window.showRegister = function() {
            document.getElementById('registerForm').classList.toggle('hidden');
        };

        window.showLogin = function() {
            document.getElementById('registerForm').classList.add('hidden');
        };

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        async function showApp() {
            document.getElementById('authForm').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            updateUserInfo();
            await loadSettings();
            loadEvents();
            
            if (currentUser.role === 'admin' || currentUser.role === 'moderator') {
                document.getElementById('adminPanel').classList.remove('hidden');
                loadAdminEvents();
            }
        }

        function updateUserInfo() {
            document.getElementById('userBalance').textContent = currentUser.balance;
            document.getElementById('userRole').textContent = 
                currentUser.role === 'admin' ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' :
                currentUser.role === 'moderator' ? '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
        }

        // === –ö–ê–¢–ï–ì–û–†–ò–ò –ò –°–û–ë–´–¢–ò–Ø ===
        window.selectCategory = function(category) {
            currentCategory = category;
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            document.querySelectorAll('.category').forEach(cat => cat.classList.remove('active'));
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            displayEvents();
        };

        window.loadEvents = async function() {
            try {
                const eventsRef = ref(database, 'events');
                const snapshot = await get(eventsRef);
                
                if (snapshot.exists()) {
                    events = snapshot.val();
                    displayEvents();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–±—ã—Ç–∏–π:', error);
            }
        };

        function displayEvents() {
            const container = document.getElementById('eventsContainer');
            container.innerHTML = '';

            const categoryEvents = Object.entries(events).filter(([_, event]) => 
                event.category === currentCategory && event.status === 'active'
            );

            if (categoryEvents.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: #b0bec5;">
                        <h3>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                        <p>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è</p>
                    </div>
                `;
                return;
            }

            categoryEvents.forEach(([eventId, event]) => {
                const eventCard = createEventCard(eventId, event);
                container.appendChild(eventCard);
            });
        }

        function createEventCard(eventId, event) {
            const div = document.createElement('div');
            div.className = 'event-card';
            
            div.innerHTML = `
                <div class="event-title">${event.title}</div>
                <div class="event-description">${event.description}</div>
                <div class="event-options">
                    ${event.options.map((option, index) => `
                        <div class="option-button" onclick="toggleBetSelection('${eventId}', ${index})">
                            <div class="option-text">${option}</div>
                            <div class="option-coefficient">${event.coefficients[index]}</div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            return div;
        }

        // === –ö–û–†–ó–ò–ù–ê –°–¢–ê–í–û–ö ===
        window.toggleBetSelection = function(eventId, optionIndex) {
            const event = events[eventId];
            const betKey = `${eventId}_${optionIndex}`;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Å—Ç–∞–≤–∫–∞ –∏–∑ —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
            const existingBetIndex = selectedBets.findIndex(bet => bet.eventId === eventId);
            
            if (existingBetIndex !== -1) {
                // –ï—Å–ª–∏ —ç—Ç–æ —Ç–∞ –∂–µ –æ–ø—Ü–∏—è, —É–±–∏—Ä–∞–µ–º
                if (selectedBets[existingBetIndex].optionIndex === optionIndex) {
                    selectedBets.splice(existingBetIndex, 1);
                } else {
                    // –ó–∞–º–µ–Ω—è–µ–º –Ω–∞ –Ω–æ–≤—É—é –æ–ø—Ü–∏—é
                    selectedBets[existingBetIndex] = {
                        eventId,
                        optionIndex,
                        eventTitle: event.title,
                        option: event.options[optionIndex],
                        coefficient: event.coefficients[optionIndex]
                    };
                }
            } else {
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Å—Ç–∞–≤–∫—É
                selectedBets.push({
                    eventId,
                    optionIndex,
                    eventTitle: event.title,
                    option: event.options[optionIndex],
                    coefficient: event.coefficients[optionIndex]
                });
            }
            
            updateBetSlip();
            updateEventButtons();
        };

        function updateBetSlip() {
            const container = document.getElementById('betSlipContent');
            
            if (selectedBets.length === 0) {
                container.innerHTML = `
                    <div class="empty-betslip">
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è —Å—Ç–∞–≤–∫–∏</p>
                    </div>
                `;
                return;
            }

            const totalCoefficient = selectedBets.reduce((acc, bet) => acc * bet.coefficient, 1);
            
            container.innerHTML = `
                <button class="clear-all" onclick="clearAllBets()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
                
                <div style="margin-bottom: 20px;">
                    ${selectedBets.map((bet, index) => `
                        <div class="bet-item">
                            <button class="remove-bet" onclick="removeBet(${index})">&times;</button>
                            <div class="bet-event-title">${bet.eventTitle}</div>
                            <div class="bet-option">${bet.option}</div>
                            <div class="bet-coefficient">${bet.coefficient}</div>
                        </div>
                    `).join('')}
                </div>

                <div class="bet-summary">
                    <div class="bet-type-selector">
                        <button class="bet-type-button ${selectedBets.length === 1 ? 'active' : ''}" 
                                onclick="setBetType('single')" ${selectedBets.length > 1 ? 'disabled' : ''}>
                            –û–¥–∏–Ω–æ—á–Ω–∞—è
                        </button>
                        <button class="bet-type-button ${selectedBets.length > 1 ? 'active' : ''}" 
                                onclick="setBetType('express')" ${selectedBets.length === 1 ? 'disabled' : ''}>
                            –≠–∫—Å–ø—Ä–µ—Å—Å
                        </button>
                    </div>
                    
                    <input type="number" class="stake-input" id="stakeAmount" 
                           placeholder="–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏" min="1" max="${settings.maxBetAmount}"
                           onInput="updatePotentialPayout()">
                    
                    <div class="potential-payout">
                        <strong>–û–±—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: ${totalCoefficient.toFixed(2)}</strong><br>
                        <span id="potentialPayout">–í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: 0 –º–æ–Ω–µ—Ç</span>
                    </div>
                    
                    <button class="place-bet-button" onclick="showBetModal()" 
                            ${selectedBets.length === 0 ? 'disabled' : ''}>
                        –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É
                    </button>
                </div>
            `;
        }

        function updateEventButtons() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Å–æ–±—ã—Ç–∏–π
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });

            selectedBets.forEach(bet => {
                const buttons = document.querySelectorAll('.event-card .option-button');
                buttons.forEach((btn, globalIndex) => {
                    // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –ø–æ –¥–∞–Ω–Ω—ã–º
                    if (btn.onclick && btn.onclick.toString().includes(`'${bet.eventId}', ${bet.optionIndex}`)) {
                        btn.classList.add('selected');
                    }
                });
            });
        }

        window.removeBet = function(index) {
            selectedBets.splice(index, 1);
            updateBetSlip();
            updateEventButtons();
        };

        window.clearAllBets = function() {
            selectedBets = [];
            updateBetSlip();
            updateEventButtons();
        };

        window.updatePotentialPayout = function() {
            const stake = parseFloat(document.getElementById('stakeAmount').value) || 0;
            const totalCoefficient = selectedBets.reduce((acc, bet) => acc * bet.coefficient, 1);
            const payout = (stake * totalCoefficient).toFixed(2);
            
            document.getElementById('potentialPayout').textContent = 
                `–í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: ${payout} –º–æ–Ω–µ—Ç`;
        };

        // === –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –°–¢–ê–í–ö–ò ===
        window.showBetModal = function() {
            const stake = parseFloat(document.getElementById('stakeAmount').value);
            
            if (!stake || stake <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏');
                return;
            }

            if (stake > currentUser.balance) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');
                return;
            }

            if (stake > settings.maxBetAmount) {
                alert(`–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞: ${settings.maxBetAmount} –º–æ–Ω–µ—Ç`);
                return;
            }

            const totalCoefficient = selectedBets.reduce((acc, bet) => acc * bet.coefficient, 1);
            const potentialPayout = (stake * totalCoefficient).toFixed(2);
            const betType = selectedBets.length === 1 ? 'single' : 'express';

            document.getElementById('betModalContent').innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4>–¢–∏–ø —Å—Ç–∞–≤–∫–∏: ${betType === 'single' ? '–û–¥–∏–Ω–æ—á–Ω–∞—è' : '–≠–∫—Å–ø—Ä–µ—Å—Å'}</h4>
                    <p><strong>–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏:</strong> ${stake} –º–æ–Ω–µ—Ç</p>
                    <p><strong>–û–±—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç:</strong> ${totalCoefficient.toFixed(2)}</p>
                    <p><strong>–í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à:</strong> ${potentialPayout} –º–æ–Ω–µ—Ç</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4>–í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:</h4>
                    ${selectedBets.map(bet => `
                        <div style="background: rgba(255,255,255,0.1); padding: 10px; margin: 5px 0; border-radius: 8px;">
                            <strong>${bet.eventTitle}</strong><br>
                            ${bet.option} (${bet.coefficient})
                        </div>
                    `).join('')}
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button class="btn" onclick="placeBet()" style="flex: 1;">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                    <button class="btn" onclick="closeBetModal()" style="flex: 1; background: #666;">–û—Ç–º–µ–Ω–∞</button>
                </div>
            `;

            document.getElementById('betModal').style.display = 'block';
        };

        window.closeBetModal = function() {
            document.getElementById('betModal').style.display = 'none';
        };

        window.placeBet = async function() {
            const stake = parseFloat(document.getElementById('stakeAmount').value);
            const totalCoefficient = selectedBets.reduce((acc, bet) => acc * bet.coefficient, 1);
            const betType = selectedBets.length === 1 ? 'single' : 'express';

            try {
                const bet = {
                    user: currentUser.username,
                    type: betType,
                    events: selectedBets,
                    amount: stake,
                    coefficient: totalCoefficient,
                    status: 'pending',
                    timestamp: Date.now()
                };

                // –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞–≤–∫—É
                const betsRef = ref(database, 'bets');
                await push(betsRef, bet);

                // –û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å
                const newBalance = currentUser.balance - stake;
                await update(ref(database, `users/${currentUser.username}`), { balance: newBalance });
                currentUser.balance = newBalance;

                updateUserInfo();
                clearAllBets();
                closeBetModal();
                
                alert('–°—Ç–∞–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å—Ç–∞–≤–∫–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å—Ç–∞–≤–∫–∏');
            }
        };

        // === –ê–î–ú–ò–ù –§–£–ù–ö–¶–ò–ò ===
        window.addEvent = async function() {
            const category = document.getElementById('eventCategory').value;
            const title = document.getElementById('eventTitle').value;
            const description = document.getElementById('eventDescription').value;
            const options = document.getElementById('eventOptions').value.split(',').map(s => s.trim());
            const coefficients = document.getElementById('eventCoefficients').value.split(',').map(s => parseFloat(s.trim()));

            if (!title || !description || options.length === 0 || coefficients.length === 0) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }

            if (options.length !== coefficients.length) {
                alert('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤');
                return;
            }

            try {
                const newEvent = {
                    category,
                    title,
                    description,
                    options,
                    coefficients,
                    status: 'active',
                    createdBy: currentUser.username,
                    timestamp: Date.now()
                };

                const eventsRef = ref(database, 'events');
                await push(eventsRef, newEvent);

                // –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
                document.getElementById('eventTitle').value = '';
                document.getElementById('eventDescription').value = '';
                document.getElementById('eventOptions').value = '';
                document.getElementById('eventCoefficients').value = '';

                loadEvents();
                loadAdminEvents();
                alert('–°–æ–±—ã—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è:', error);
                alert('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è');
            }
        };

        window.loadAdminEvents = async function() {
            try {
                const eventsRef = ref(database, 'events');
                const snapshot = await get(eventsRef);
                
                if (snapshot.exists()) {
                    events = snapshot.val();
                    displayAdminEvents();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–±—ã—Ç–∏–π:', error);
            }
        };

        function displayAdminEvents() {
            const container = document.getElementById('adminEventsList');
            container.innerHTML = '';

            Object.entries(events).forEach(([eventId, event]) => {
                const eventDiv = document.createElement('div');
                eventDiv.style.cssText = `
                    background: rgba(255,255,255,0.1);
                    padding: 15px;
                    margin-bottom: 10px;
                    border-radius: 8px;
                    border: 1px solid rgba(255,255,255,0.1);
                `;
                eventDiv.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 5px;">${event.title}</div>
                    <div style="font-size: 12px; color: #b0bec5; margin-bottom: 10px;">
                        ${event.category} | –°—Ç–∞—Ç—É—Å: ${event.status === 'active' ? '–ê–∫—Ç–∏–≤–Ω–æ' : '–ó–∞–≤–µ—Ä—à–µ–Ω–æ'}
                    </div>
                    ${event.status === 'active' ? `
                        <select onchange="finishEvent('${eventId}', this.value)" style="padding: 8px; border-radius: 4px; background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2);">
                            <option value="">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</option>
                            ${event.options.map((option, index) => `
                                <option value="${index}">${option}</option>
                            `).join('')}
                        </select>
                    ` : `<span style="color: #4fc3f7;">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>`}
                `;
                container.appendChild(eventDiv);
            });
        }

        window.finishEvent = async function(eventId, winningOptionIndex) {
            if (winningOptionIndex === '') return;

            try {
                // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–±—ã—Ç–∏—è
                await update(ref(database, `events/${eventId}`), { 
                    status: 'finished',
                    result: parseInt(winningOptionIndex)
                });

                // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–≤–∫–∏
                const betsRef = ref(database, 'bets');
                const betsSnapshot = await get(betsRef);
                
                if (betsSnapshot.exists()) {
                    const allBets = betsSnapshot.val();
                    
                    for (const [betId, bet] of Object.entries(allBets)) {
                        if (bet.status === 'pending') {
                            let won = false;
                            
                            if (bet.type === 'single') {
                                // –î–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–π —Å—Ç–∞–≤–∫–∏
                                const eventBet = bet.events.find(e => e.eventId === eventId);
                                if (eventBet) {
                                    won = eventBet.optionIndex === parseInt(winningOptionIndex);
                                }
                            } else if (bet.type === 'express') {
                                // –î–ª—è —ç–∫—Å–ø—Ä–µ—Å—Å–∞ - –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
                                const eventBet = bet.events.find(e => e.eventId === eventId);
                                if (eventBet) {
                                    const eventWon = eventBet.optionIndex === parseInt(winningOptionIndex);
                                    if (!eventWon) {
                                        // –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–≥—Ä–∞–Ω–æ, –≤–µ—Å—å —ç–∫—Å–ø—Ä–µ—Å—Å –ø—Ä–æ–∏–≥—Ä–∞–Ω
                                        await update(ref(database, `bets/${betId}`), { status: 'lost' });
                                        continue;
                                    }
                                    
                                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ —Å–æ–±—ã—Ç–∏—è –≤ —ç–∫—Å–ø—Ä–µ—Å—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã
                                    const allEventsFinished = bet.events.every(e => {
                                        const event = events[e.eventId];
                                        return event && event.status === 'finished';
                                    });
                                    
                                    if (allEventsFinished) {
                                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—ã–∏–≥—Ä–∞–Ω—ã –ª–∏ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
                                        const allEventsWon = bet.events.every(e => {
                                            const event = events[e.eventId];
                                            return event && event.result === e.optionIndex;
                                        });
                                        
                                        won = allEventsWon;
                                    } else {
                                        continue; // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
                                    }
                                }
                            }
                            
                            if (bet.events.some(e => e.eventId === eventId)) {
                                if (bet.type === 'single' || 
                                    (bet.type === 'express' && bet.events.every(e => events[e.eventId] && events[e.eventId].status === 'finished'))) {
                                    
                                    await update(ref(database, `bets/${betId}`), { 
                                        status: won ? 'won' : 'lost' 
                                    });

                                    // –ù–∞—á–∏—Å–ª–∏—Ç—å –≤—ã–∏–≥—Ä—ã—à
                                    if (won) {
                                        const userRef = ref(database, `users/${bet.user}`);
                                        const userSnapshot = await get(userRef);
                                        if (userSnapshot.exists()) {
                                            const userData = userSnapshot.val();
                                            const winAmount = Math.round(bet.amount * bet.coefficient);
                                            await update(userRef, { 
                                                balance: userData.balance + winAmount 
                                            });
                                        }
                                    }
                                }
                            }
                        }
                    }
                }

                loadEvents();
                loadAdminEvents();
                alert('–°–æ–±—ã—Ç–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è');
            }
        };

        window.loadSettings = async function() {
            try {
                const settingsRef = ref(database, 'settings');
                const snapshot = await get(settingsRef);
                
                if (snapshot.exists()) {
                    settings = snapshot.val();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('load', async function() {
            try {
                const settingsRef = ref(database, 'settings');
                const snapshot = await get(settingsRef);
                
                if (!snapshot.exists()) {
                    await set(settingsRef, settings);
                } else {
                    settings = snapshot.val();
                }

                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
                const savedUser = localStorage.getItem('currentUser');
                if (savedUser) {
                    try {
                        const userData = JSON.parse(savedUser);
                        const userRef = ref(database, `users/${userData.username}`);
                        const userSnapshot = await get(userRef);
                        
                        if (userSnapshot.exists()) {
                            currentUser = { ...userData, ...userSnapshot.val() };
                            showApp();
                        } else {
                            localStorage.removeItem('currentUser');
                        }
                    } catch (error) {
                        localStorage.removeItem('currentUser');
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('betModal');
            if (event.target === modal) {
                closeBetModal();
            }
        };
    </script>
</body>
</html>
