<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxBet - –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <div class="header">
        <div class="logo">üéØ MaxBet</div>
        <div class="user-info">
            <div class="balance">
                –ë–∞–ª–∞–Ω—Å: <span id="user-balance">0 –ª—É–ø–∞–Ω—á–∏–∫–æ–≤</span>
            </div>
            <div class="user-menu">
                <span>–ü—Ä–∏–≤–µ—Ç, <span id="username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>!</span>
                <button class="btn btn-secondary" onclick="logout()" style="padding: 8px 16px; width: auto;">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="navigation">
        <a href="main.html" class="nav-tab">üìÖ –°–æ–±—ã—Ç–∏—è</a>
        <a href="history.html" class="nav-tab">üìä –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫</a>
        <a href="profile.html" class="nav-tab">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
        <a href="moderator.html" class="nav-tab active">üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</a>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ -->
    <div class="admin-panel">
        <div class="admin-header">
            <h2 class="admin-title">üõ°Ô∏è –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞</h2>
        </div>

        <div class="admin-tabs">
            <div class="admin-tab active" onclick="switchTab('events')">üìÖ –°–æ–±—ã—Ç–∏—è</div>
            <div class="admin-tab" onclick="switchTab('bets')">üéØ –°—Ç–∞–≤–∫–∏</div>
        </div>

        <!-- –°–û–ë–´–¢–ò–Ø -->
        <div id="tab-events" class="admin-tab-content">
            <div class="admin-grid">
                <div class="admin-card">
                    <h4>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ</h4>
                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="eventCategory">
                            <option value="politics">üèõÔ∏è –ü–æ–ª–∏—Ç–∏–∫–∞</option>
                            <option value="entertainment">üé≠ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                            <option value="technology">üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                            <option value="economics">üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞</option>
                            <option value="weather">üå§Ô∏è –ü–æ–≥–æ–¥–∞</option>
                            <option value="society">üë• –û–±—â–µ—Å—Ç–≤–æ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è:</label>
                        <input type="text" id="eventTitle" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í—ã–±–æ—Ä—ã –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ 2025">
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="eventDescription" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>–í–∞—Ä–∏–∞–Ω—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                        <input type="text" id="eventOptions" placeholder="–î–∞, –ù–µ—Ç, –í–æ–∑–º–æ–∂–Ω–æ">
                    </div>
                    <div class="form-group">
                        <label>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                        <input type="text" id="eventCoefficients" placeholder="1.5, 2.0, 3.2">
                    </div>
                    <button class="btn" onclick="addEvent()">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
                </div>

                <div class="admin-card">
                    <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏</h4>
                    <div style="margin-bottom: 15px;">
                        <button class="btn" onclick="loadEvents()">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                    </div>
                    <div id="adminEventsList" style="max-height: 400px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è -->
        <div id="finishEventModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('finishEventModal')">&times;</span>
                <h3 class="modal-title">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h3>
                <div id="finishEventTitle" style="margin-bottom: 15px;"></div>
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ö–æ–¥ —Å–æ–±—ã—Ç–∏—è:</label>
                    <select id="finishEventOption"></select>
                </div>
                <div style="text-align: right;">
                    <button class="btn btn-secondary" onclick="closeModal('finishEventModal')">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn" onclick="finishEventConfirm()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –°–¢–ê–í–ö–ò -->
        <div id="tab-bets" class="admin-tab-content hidden">
            <div class="admin-card">
                <h4>–°—Ç–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h4>
                <div class="filters">
                    <div class="filter-group">
                        <label>–°—Ç–∞—Ç—É—Å:</label>
                        <select id="betStatusFilter" onchange="filterBets()">
                            <option value="all">–í—Å–µ —Å—Ç–∞–≤–∫–∏</option>
                            <option value="pending">–û–∂–∏–¥–∞—é—Ç</option>
                            <option value="won">–í—ã–∏–≥—Ä–∞–ª–∏</option>
                            <option value="lost">–ü—Ä–æ–∏–≥—Ä–∞–ª–∏</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>–¢–∏–ø:</label>
                        <select id="betTypeFilter" onchange="filterBets()">
                            <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
                            <option value="single">–û–¥–∏–Ω–æ—á–Ω—ã–µ</option>
                            <option value="express">–≠–∫—Å–ø—Ä–µ—Å—Å—ã</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</label>
                        <input type="text" id="betUserFilter" placeholder="–õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" oninput="filterBets()">
                    </div>
                    <button class="btn" onclick="loadBets()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <table class="admin-table" id="betsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                            <th>–¢–∏–ø</th>
                            <th>–°—É–º–º–∞</th>
                            <th>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç</th>
                            <th>–í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î–∞—Ç–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="betsTableBody">
                        <tr><td colspan="9" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞–≤–æ–∫...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞–≤–∫–∏ -->
    <div id="viewBetModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('viewBetModal')">&times;</span>
            <h3 class="modal-title">–î–µ—Ç–∞–ª–∏ —Å—Ç–∞–≤–∫–∏</h3>
            <div id="betDetails"></div>
            <div style="text-align: right; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal('viewBetModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="firebase-config.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="sync-manager.js"></script>
    <script src="moderator.js" type="module"></script>
</body>
</html>
